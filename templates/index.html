{% extends "base.html" %}

{% block title %}osu country rankings{% endblock %}

{% block page_content %}

<div class="container">

    <h1>Hello Flask</h1>
    <p>This is my first flask website.</p>
    <a href="{{ url_for('chart') }}">To chart page.</a>

    <div class="header">
    </div>

    <div class="rankings_table">
        <table>
            <thead>
                <tr>
                    {% for key in data.keys() %}
                        <th>{{ key }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in range(data['ranking']|length) %}
                    <tr>
                        {% for key in data.keys() %}
                            <td>{{ data[key][row] }}</td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
<!-- 
        <ul>
            {% for key, values in data.items() %}
                <li>{{ key }}: {{ values }}</li>
            {% endfor %}
        </ul> -->

    </div>


</div>

<script>

    document.addEventListener('DOMContentLoaded', function() {
        axios.get('/api/country_rankings')
            .then( (response) => {
                const data = response.data;
                const tableBody = document.querySelector('.rankings_table tbody');
               
                for (let i in data){
                    console.log(i, data[i])
                }
            
                for (let key of countryRankingsEntries){
                        const row = document.createElement('tr');

                        for(let value of data[key]){
                            const cell = document.createElement('td');
                            cell.textContent = value;
                        }

                        row.appendChild(cell);

                    tableBody.appendChild(row);

                }
            })
            .catch( (error) => {
                console.error('Error fetching the data', error);
            });
    });

</script>
{% endblock %}

